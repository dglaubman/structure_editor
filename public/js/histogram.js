// Generated by CoffeeScript 1.6.3
(function() {
  var Histogram;

  Histogram = (function() {
    var numBuckets, threshold;

    threshold = 100;

    numBuckets = 100;

    function Histogram(limit, statistic) {
      var i;
      this.limit = limit;
      this.statistic = statistic;
      this.counter = 0;
      this.bucketSize = Math.max(1, Math.ceil(limit / numBuckets));
      this.currentYear = 0;
      this.buckets = (function() {
        var _i, _results;
        _results = [];
        for (i = _i = 1; 1 <= numBuckets ? _i <= numBuckets : _i >= numBuckets; i = 1 <= numBuckets ? ++_i : --_i) {
          _results.push(0);
        }
        return _results;
      })();
    }

    Histogram.prototype.process = function(v) {
      var p;
      this.statistic.observe(v);
      if (++this.counter % threshold === 0) {
        return p = this.buckets.map;
      }
    };

    return Histogram;

  })();

}).call(this);
