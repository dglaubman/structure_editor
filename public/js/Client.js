// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    var comm, log, messageHandler, semver, widgets,
      _this = this;
    semver = "0.1.1";
    log = new Log($("#console"));
    log.write("Starting up ...");
    $("#disconnect").on('click', function(evt) {
      return comm.disconnect();
    });
    $(".engine").on('click', function(evt) {
      return comm.startEngine(this.textContent);
    });
    $(".adapter").on('click', function(evt) {
      return comm.startAdapter(this.textContent);
    });
    $("#clear").on('click', function() {
      return log.clear();
    });
    widgets = new Controller(log);
    widgets.stopServer = function(name) {
      return comm.publish(config.workX, "stop " + name, config.execQ);
    };
    messageHandler = function(m) {
      var body, topic;
      topic = m.args.routingKey;
      body = m.body.getString(Charset.UTF8);
      switch (m.args.exchange) {
        case config.signalX:
          signalDispatcher(widgets, topic, body);
          break;
        case config.serverX:
          serverDispatcher(widgets, topic, body);
      }
      return log.write(body);
    };
    comm = new Communicator(log, messageHandler);
    return comm.connect(config, config.credentials);
  });

}).call(this);
